# 1. Got to Telegram to get the API key first.
# 2. Find BotFather
# 3. input /newbot
# 4. Input username and Bot name
# 5. Once the username and Bot name are input, API is provided

# pip install python-telegram-bot, flask, request

# Set the TOKEN as an environment varible -> TELEGRAM_TOKEN

import telegram.ext, os

TOKEN = os.env(TELEGRAM_TOKEN)

# Functions 
def start(update, context):
    update.message.reply_text("Hello! I'm the Malware Analysis Assistant. How can I help you?")

def functions(update, context):
    update.message.reply_text("""
    The following commands are supported:

    /start -> Welcome Message
    /functions -> To show the functions of Malware Analysis Assistant
    /analyze -> To analyze the URL/IP Address/Hash. Usage: /analyze [input]
    """)

def analyze(update, context):
    malware_ioc = context.args[0]
    

# This function allows users to input any message without '/' and the bot will reply as accordingly.
# update.message.text is to get the message that users input
# Usually work with AI model
# def handle_message(update, context):
#     update.message.reply_text(f"You said: {update.message.text}")


    

updater = telgram.ext.Updater(TOKEN, user_context=True)
disp = updater.dispatcher

disp.add_handler(telegram.ext.CommandHandler("start", start))
disp.add_handler(telegram.ext.CommandHandler("functions", functions))

# This is to call the message and send back to the user
# disp.add_handler(telegram.ext.MessageHandler(telegram.ext.Filters.text, handle_message))

updater.start_polling()
updater.idle()




